<div class="flex gap-3" id="comment_<%= comment.id %>">
  <div class="avatar">
    <div class="w-8 h-8 rounded-full">
      <% if comment.user.avatar.attached? %>
        <%= image_tag comment.user.avatar, class: "w-full h-full object-cover" %>
      <% else %>
        <%= image_tag "avatar.png", class: "w-full h-full object-cover" %>
      <% end %>
    </div>
  </div>
  <div class="flex-1">
    <div class="bg-base-200 rounded-lg p-3">
      <div class="flex items-center gap-2 mb-1">
        <%= link_to user_path(comment.user), class: "hover:underline" do %>
          <span class="font-semibold text-sm"><%= comment.user.username %></span>
        <% end %>
        <span class="text-xs text-base-content/60"><%= time_ago_in_words(comment.created_at) %> ago</span>
      </div>
      <p class="text-sm"><%= comment.content %></p>
    </div>
    <div class="flex items-center gap-4 mt-2 text-xs text-base-content/60">
      <div id="comment_like_btn_<%= comment.id %>">
        <% if comment.likes.find_by(user: Current.user) %>
          <%= button_to unlike_comment_path(comment), method: :delete, 
              class: "hover:text-primary text-red-500", 
              data: { turbo_stream: true } do %>
            Liked
          <% end %>
        <% else %>
          <%= button_to like_comment_path(comment), 
              class: "hover:text-primary", 
              data: { turbo_stream: true } do %>
            Like
          <% end %>
        <% end %>
      </div>
      <div id="comment_likes_count_<%= comment.id %>">
        <span><%= pluralize(comment.likes.count, 'like') %></span>
      </div>
      <% if comment.user == Current.user %>
        <%= button_to comment_path(comment), method: :delete, 
            data: { confirm: "Are you sure you want to delete this comment?", turbo_stream: true },
            class: "hover:text-error text-xs" do %>
          Delete
        <% end %>
      <% end %>
    </div>
  </div>
</div>
